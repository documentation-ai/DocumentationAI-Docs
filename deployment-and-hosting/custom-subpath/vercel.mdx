---
title: Vercel Subpath Setup
description: "Host documentation at a custom subpath using Vercel rewrites configuration."
---

## Overview

Deploy your documentation at a custom subpath such as `yoursite.com/docs`, `yoursite.com/help`, or any path you choose using Vercel's powerful rewrite functionality. This guide walks you through configuring your Vercel project to proxy requests from your chosen subpath to your documentation hosting.

<Callout kind="info">
  Use any subpath: <kbd>/docs</kbd>, <kbd>/help</kbd>, <kbd>/guide</kbd>, etc. Replace <kbd>/docs</kbd> in examples with your chosen path.
</Callout>

## How Vercel Rewrites Work

Vercel rewrites allow you to map incoming request paths to different destinations without changing the URL in the browser. When a user visits `yoursite.com/docs`, Vercel internally proxies the request to your documentation hosting and returns the content seamlessly.

````mermaid
sequenceDiagram
    participant Browser
    participant Vercel
    participant Docs as Documentation Host
    Browser->>Vercel: GET yoursite.com/[SUBPATH]/page
    Vercel->>Docs: GET [SUBDOMAIN].documentationai.io/[SUBPATH]/page
    Docs-->>Vercel: HTML Content
    Vercel-->>Browser: HTML Content (URL stays as yoursite.com/[SUBPATH]/page)
````

## Repository Structure

Your main site repository structure remains unchanged. The subpath configuration is handled entirely through `vercel.json`:

```
your-project/
├── vercel.json          # Rewrite configuration
├── public/              # Main site assets
├── src/                 # Main site source
└── package.json
```


## Configuration Steps

<Steps>
  <Step title="Create vercel.json">
    In the root of your Vercel project, create or update the `vercel.json` file with the rewrite configuration.
  </Step>
  
  <Step title="Configure Rewrites">
    Add the complete rewrite rules to proxy documentation requests.
  </Step>
  
  <Step title="Deploy to Vercel">
    Commit your changes and deploy to Vercel.
  </Step>
  
  <Step title="Test the Configuration">
    Verify that your documentation is accessible at the custom subpath.
  </Step>
</Steps>

## Complete Vercel Configuration

Create a `vercel.json` file in your project root with the following configuration:

<Callout kind="alert">
  Replace <kbd>[SUBDOMAIN]</kbd> with your subdomain and <kbd>[SUBPATH]</kbd> with your chosen path.
</Callout>

````json
{
  "rewrites": [
    {
      "source": "/_dai/api/:path*",
      "destination": "http://[SUBDOMAIN].documentationai.io/_dai/api/:path*"
    },
    {
      "source": "/dai-assets/:path+",
      "destination": "http://[SUBDOMAIN].documentationai.io/dai-assets/:path+"
    },
    {
      "source": "/[SUBPATH]",
      "destination": "http://[SUBDOMAIN].documentationai.io/[SUBPATH]"
    },
    {
      "source": "/[SUBPATH]/:path*",
      "destination": "http://[SUBDOMAIN].documentationai.io/[SUBPATH]/:path*"
    },
    {
      "source": "/[SUBPATH]/llms.txt",
      "destination": "http://[SUBDOMAIN].documentationai.io/llms.txt"
    },
    {
      "source": "/[SUBPATH]/sitemap.xml",
      "destination": "http://[SUBDOMAIN].documentationai.io/sitemap.xml"
    },
    {
      "source": "/[SUBPATH]/robots.txt",
      "destination": "http://[SUBDOMAIN].documentationai.io/robots.txt"
    }
  ]
}
````

## Understanding the Rewrite Rules

Let's break down each rewrite rule and its purpose:

### 1. API Routes

```json
{
  "source": "/_dai/api/:path*",
  "destination": "http://[SUBDOMAIN].documentationai.io/_dai/api/:path*"
}
```

Proxies internal API requests required for documentation features like search, analytics, and interactive playground.

### 2. Static Assets

```json
{
  "source": "/dai-assets/:path+",
  "destination": "http://[SUBDOMAIN].documentationai.io/dai-assets/:path+"
}
```

Forwards requests for documentation assets (CSS, JavaScript, images) to the documentation hosting.

### 3. Documentation Root

```json
{
  "source": "/[SUBPATH]",
  "destination": "http://[SUBDOMAIN].documentationai.io/[SUBPATH]"
}
```

Handles requests to the documentation root path (e.g., `yoursite.com/[SUBPATH]`).

### 4. Documentation Pages

```json
{
  "source": "/[SUBPATH]/:path*",
  "destination": "http://[SUBDOMAIN].documentationai.io/[SUBPATH]/:path*"
}
```

Proxies all documentation page requests with the `:path*` wildcard matching any nested paths.

### 5. SEO and Discovery Files

```json
{
  "source": "/[SUBPATH]/llms.txt",
  "destination": "http://[SUBDOMAIN].documentationai.io/llms.txt"
},
{
  "source": "/[SUBPATH]/sitemap.xml",
  "destination": "http://[SUBDOMAIN].documentationai.io/sitemap.xml"
},
{
  "source": "/[SUBPATH]/robots.txt",
  "destination": "http://[SUBDOMAIN].documentationai.io/robots.txt"
}
```

Maps SEO-critical files (LLM discovery, sitemap, robots.txt) from the documentation host to your subpath.


## Domain Verification

Vercel requires domain verification for custom domains. The rewrite configuration automatically allows verification paths to pass through:

- `/.well-known/acme-challenge/*` - Let's Encrypt SSL certificate verification
- `/.well-known/vercel/*` - Vercel domain ownership verification


## Testing Your Configuration

After deploying your configuration:

<Steps>
  <Step title="Test Root Path">
    Visit `yoursite.com/[SUBPATH]` and verify the documentation loads correctly.
  </Step>
  
  <Step title="Test Nested Pages">
    Navigate to a nested documentation page like `yoursite.com/[SUBPATH]/getting-started/introduction`.
  </Step>
  
  <Step title="Check Assets">
    Open browser DevTools and verify all assets (images, CSS, JavaScript) load without errors.
  </Step>
  
  <Step title="Verify SEO Files">
    Test access to `yoursite.com/[SUBPATH]/sitemap.xml` and `yoursite.com/[SUBPATH]/robots.txt`.
  </Step>
  
  <Step title="Test Search">
    Use the documentation search functionality to ensure the API routes work correctly.
  </Step>
</Steps>

## Advanced Configuration

### Custom Headers

Add custom headers to your rewrite rules if needed:

````json
{
  "rewrites": [
    {
      "source": "/[SUBPATH]/:path*",
      "destination": "http://[SUBDOMAIN].documentationai.io/[SUBPATH]/:path*",
      "headers": {
        "X-Custom-Header": "value"
      }
    }
  ]
}
````

### Multiple Subpaths

Host different documentation instances on different subpaths:

````json
{
  "rewrites": [
    {
      "source": "/[SUBPATH-1]/:path*",
      "destination": "http://[SUBDOMAIN-1].documentationai.io/[SUBPATH-1]/:path*"
    },
    {
      "source": "/[SUBPATH-2]/:path*",
      "destination": "http://[SUBDOMAIN-2].documentationai.io/[SUBPATH-2]/:path*"
    }
  ]
}
````

### Redirects for Old Paths

Redirect old documentation URLs to the new subpath:

````json
{
  "redirects": [
    {
      "source": "/documentation/:path*",
      "destination": "/[SUBPATH]/:path*",
      "permanent": true
    }
  ],
  "rewrites": [
    // ... your existing rewrites
  ]
}
````

## Troubleshooting

<ExpandableGroup>
  <Expandable title="Documentation Not Loading">
    **Problem:** Visiting `yoursite.com/[SUBPATH]` shows a 404 error.

    **Solution:** 
    1. Verify your `vercel.json` file is in the project root
    2. Check that the subdomain in the configuration matches your actual subdomain
    3. Redeploy your Vercel project after making changes
  </Expandable>

  <Expandable title="Assets Failing to Load">
    **Problem:** Documentation loads but images or styles are missing.

    **Solution:**
    1. Check browser DevTools Console for 404 errors
    2. Verify the `/dai-assets/:path+` rewrite rule is present
    3. Ensure the destination URL is correct
  </Expandable>

  <Expandable title="SSL Certificate Errors">
    **Problem:** Browser shows SSL certificate warnings.

    **Solution:**
    1. Ensure your custom domain is properly configured in Vercel
    2. Wait for SSL certificate provisioning (can take up to 24 hours)
    3. Verify `.well-known` paths are not blocked
  </Expandable>

  <Expandable title="Search Not Working">
    **Problem:** Documentation search returns no results or errors.

    **Solution:**
    1. Verify the `/_dai/api/:path*` rewrite rule is configured
    2. Check browser DevTools Network tab for failed API requests
    3. Ensure CORS is not blocking the requests
  </Expandable>

  <Expandable title="Deployment Takes Too Long">
    **Problem:** Vercel deployment is slow or times out.

    **Solution:**
    1. Verify you're not proxying large files through rewrites
    2. Check Vercel's status page for outages
    3. Contact Vercel support if the issue persists
  </Expandable>
</ExpandableGroup>

## Performance Considerations


### Caching

Vercel automatically caches responses based on the documentation host's cache headers. To optimize:

- Ensure your documentation includes proper `Cache-Control` headers
- Static assets should have long cache durations
- API responses should have short or no cache durations

### Edge Network

Vercel's edge network serves content from the location closest to your users, reducing latency and improving performance globally.

## Next Steps

After successfully configuring your Vercel subpath deployment:

1. Monitor your Vercel dashboard for traffic and errors
2. Set up custom domain SSL if not already configured
3. Configure analytics to track documentation usage
4. Test your documentation thoroughly across different pages
5. Update any internal links to use the new subpath

<Callout kind="success">
  ✅ Your documentation is now live!
</Callout>

